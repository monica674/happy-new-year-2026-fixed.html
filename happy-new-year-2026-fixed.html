<!DOCTYPE html>
<html lang="en" itemscope itemtype="https://schema.org/WebApplication">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    
    <!-- Primary SEO Meta Tags -->
    <title>Happy New Year 2026 Greeting Card Maker | Create & Share Viral Wishes</title>
    <meta name="description" content="Create personalized Happy New Year 2026 greeting cards with fireworks animation. Upload photo, add name, customize wishes. Share viral greetings on WhatsApp, Facebook, Instagram instantly. Free online 2026 greeting generator.">
    <meta name="keywords" content="Happy New Year 2026, 2026 greeting card, New Year wishes 2026, viral greeting maker, share New Year card, online greeting generator, free New Year wishes, digital greeting card 2026, 2026 fireworks animation, personalized New Year card">
    
    <!-- Open Graph Meta Tags for Social Sharing -->
    <meta property="og:title" content="Happy New Year 2026 Greeting Card Maker - Create Viral Wishes">
    <meta property="og:description" content="Create personalized 2026 New Year greetings with fireworks. Upload photo, add name, customize wishes. Share on WhatsApp, Facebook, Instagram instantly!">
    <meta property="og:type" content="website">
    <meta property="og:url" content="https://toolnest.live/">
    <meta property="og:image" content="https://toolnest.live/images/happy-new-year-2026-og.jpg">
    <meta property="og:site_name" content="ToolNest - Happy New Year 2026 Generator">
    
    <!-- Twitter Card Meta Tags -->
    <meta name="twitter:card" content="summary_large_image">
    <meta name="twitter:title" content="Happy New Year 2026 Greeting Card Generator">
    <meta name="twitter:description" content="Create viral 2026 New Year wishes with photo upload, name customization & fireworks animation. Free online tool.">
    <meta name="twitter:image" content="https://toolnest.live/images/happy-new-year-2026-twitter.jpg">
    
    <!-- Canonical URL -->
    <link rel="canonical" href="https://toolnest.live/">
    
    <!-- Schema.org Structured Data -->
    <script type="application/ld+json">
    {
        "@context": "https://schema.org",
        "@type": "WebApplication",
        "name": "Happy New Year 2026 Greeting Card Generator",
        "description": "Free online tool to create personalized Happy New Year 2026 greeting cards with photo upload, name customization, and fireworks animation",
        "url": "https://toolnest.live/",
        "applicationCategory": "DesignApplication",
        "operatingSystem": "Any",
        "offers": {
            "@type": "Offer",
            "price": "0",
            "priceCurrency": "USD"
        },
        "author": {
            "@type": "Organization",
            "name": "ToolNest",
            "url": "https://toolnest.live/"
        },
        "datePublished": "2024-12-31",
        "dateModified": "2025-12-31"
    }
    </script>
    
    <!-- Preconnect for faster loading -->
    <link rel="preconnect" href="https://www.highperformanceformat.com">
    <link rel="dns-prefetch" href="https://pl28368255.effectivegatecpm.com">
    
    <style>
        * { margin: 0; padding: 0; box-sizing: border-box; }
        body {
            background: #000000;
            color: #ff6600;
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Oxygen, Ubuntu, Cantarell, 'Helvetica Neue', sans-serif;
            min-height: 100vh;
            overflow-x: hidden;
            -webkit-tap-highlight-color: transparent;
        }
        .orange-border {
            border: 3px solid #ff6600;
            border-radius: 15px;
            margin: 10px;
            padding: 15px;
            background: rgba(0, 0, 0, 0.9);
            box-shadow: 0 0 20px rgba(255, 102, 0, 0.3);
        }
        
        /* Ad Container Styling */
        .ad-container {
            min-height: 100px;
            margin: 20px auto;
            padding: 10px;
            text-align: center;
            background: rgba(255, 102, 0, 0.05);
            border: 1px dashed #ff6600;
            border-radius: 10px;
            display: flex;
            align-items: center;
            justify-content: center;
        }
        
        #fireworks-canvas {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            z-index: 1;
            pointer-events: none;
        }
        .container {
            position: relative;
            z-index: 2;
            max-width: 900px;
            margin: 10px auto;
            padding: 5px;
        }
        .main-header {
            text-align: center;
            padding: 15px;
            animation: titleGlow 2s infinite alternate;
        }
        @keyframes titleGlow {
            0% { text-shadow: 0 0 10px #ff6600; }
            100% { text-shadow: 0 0 40px #ff9900, 0 0 60px #ff3300; }
        }
        h1 {
            font-size: 2.5rem;
            color: #ff6600;
            letter-spacing: 2px;
            margin-bottom: 10px;
            animation: pulse 1.5s infinite;
            line-height: 1.2;
        }
        @keyframes pulse {
            0%, 100% { transform: scale(1); }
            50% { transform: scale(1.03); }
        }
        .tagline {
            font-size: 1.2rem;
            color: #ff9933;
            margin: 10px 0;
            line-height: 1.4;
        }
        input, textarea, select {
            border: 2px solid #ff6600 !important;
            background: #111;
            color: #ff6600;
            padding: 15px;
            margin: 10px auto;
            border-radius: 10px;
            width: 95%;
            font-size: 1rem;
            display: block;
            font-weight: bold;
            outline: none;
        }
        input::placeholder, textarea::placeholder {
            color: #ff9966;
            opacity: 0.8;
        }
        .action-btn {
            background: linear-gradient(45deg, #ff6600, #ff3300);
            color: #000;
            border: none;
            padding: 16px 30px;
            margin: 15px;
            border-radius: 50px;
            font-size: 1.2rem;
            font-weight: bold;
            cursor: pointer;
            transition: all 0.3s;
            display: block;
            margin-left: auto;
            margin-right: auto;
            min-width: 280px;
            max-width: 100%;
            touch-action: manipulation;
        }
        .action-btn:hover, .action-btn:active {
            transform: scale(1.05);
            box-shadow: 0 0 30px #ff6600;
        }
        .share-container {
            display: none;
            grid-template-columns: 1fr;
            gap: 15px;
            padding: 20px;
        }
        .share-btn {
            padding: 18px;
            border-radius: 12px;
            font-size: 1.4rem;
            font-weight: bold;
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 12px;
            cursor: pointer;
            transition: all 0.3s;
            border: none;
            touch-action: manipulation;
        }
        .share-btn:hover, .share-btn:active {
            transform: translateY(-3px);
        }
        .whatsapp-btn { 
            background: #25D366; 
            color: white;
            box-shadow: 0 5px 15px rgba(37, 211, 102, 0.4);
        }
        .facebook-btn { 
            background: #1877F2; 
            color: white;
            box-shadow: 0 5px 15px rgba(24, 119, 242, 0.4);
        }
        .instagram-btn { 
            background: linear-gradient(45deg, #833AB4, #E1306C, #F77737); 
            color: white;
            box-shadow: 0 5px 15px rgba(131, 58, 180, 0.4);
        }
        .all-share-btn { 
            background: linear-gradient(45deg, #ff6600, #ff3300, #ff0066);
            color: white;
            font-size: 1.6rem;
            padding: 22px;
            animation: allShareGlow 2s infinite;
        }
        @keyframes allShareGlow {
            0%, 100% { box-shadow: 0 0 20px rgba(255, 102, 0, 0.7); }
            50% { box-shadow: 0 0 35px rgba(255, 102, 0, 0.9); }
        }
        #photo-preview {
            max-width: 200px;
            border: 3px solid #ff6600;
            border-radius: 15px;
            margin: 15px auto;
            display: none;
            box-shadow: 0 0 20px rgba(255, 102, 0, 0.5);
        }
        .wishes-grid {
            display: grid;
            grid-template-columns: 1fr;
            gap: 12px;
            margin: 20px 0;
        }
        .wish-option {
            background: rgba(255, 102, 0, 0.1);
            border: 2px solid #ff6600;
            color: #ff9933;
            padding: 15px;
            border-radius: 12px;
            cursor: pointer;
            transition: all 0.3s;
            font-size: 1rem;
            text-align: center;
            line-height: 1.4;
            touch-action: manipulation;
        }
        .wish-option:hover, .wish-option:active, .wish-option.selected {
            background: #ff6600;
            color: #000;
            transform: scale(1.02);
        }
        .counter {
            position: fixed;
            top: 10px;
            right: 10px;
            background: rgba(255, 102, 0, 0.2);
            padding: 10px 15px;
            border-radius: 8px;
            border: 2px solid #ff6600;
            font-size: 0.9rem;
            color: #ffcc00;
            z-index: 100;
            backdrop-filter: blur(5px);
            display: none;
            max-width: 180px;
            text-align: center;
            line-height: 1.3;
        }
        .instructions {
            background: rgba(255, 102, 0, 0.1);
            border-left: 4px solid #ff6600;
            padding: 15px;
            margin: 20px 0;
            border-radius: 0 12px 12px 0;
            display: none;
        }
        .instructions h3 {
            color: #ffcc00;
            margin-bottom: 10px;
            font-size: 1.2rem;
        }
        .instructions ol {
            padding-left: 20px;
            color: #ff9966;
        }
        .instructions li {
            margin-bottom: 8px;
            font-size: 1rem;
            line-height: 1.4;
        }
        
        /* Music Control */
        #musicControl {
            position: fixed;
            top: 10px;
            left: 10px;
            z-index: 100;
            background: rgba(255, 102, 0, 0.95);
            color: #000;
            border: 2px solid #ffcc00;
            border-radius: 50%;
            width: 50px;
            height: 50px;
            font-size: 1.5rem;
            cursor: pointer;
            display: none;
            align-items: center;
            justify-content: center;
            box-shadow: 0 0 15px rgba(255, 102, 0, 0.7);
            transition: all 0.3s;
            touch-action: manipulation;
        }
        #musicControl:hover, #musicControl:active {
            background: #ff6600;
            transform: scale(1.1);
            box-shadow: 0 0 20px rgba(255, 102, 0, 0.9);
        }
        #musicControl.playing {
            background: #ff3300;
            border-color: #ff9900;
            animation: musicPulse 1.5s infinite;
        }
        @keyframes musicPulse {
            0%, 100% { 
                transform: scale(1); 
                box-shadow: 0 0 15px rgba(255, 102, 0, 0.7);
            }
            50% { 
                transform: scale(1.08); 
                box-shadow: 0 0 20px rgba(255, 102, 0, 0.9);
            }
        }
        
        /* Start Screen */
        #startScreen {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: #000;
            z-index: 9999;
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
            text-align: center;
            padding: 20px;
        }
        .start-title {
            font-size: 2.5rem;
            color: #ff6600;
            margin-bottom: 15px;
            animation: pulse 1.5s infinite;
            line-height: 1.2;
        }
        .start-subtitle {
            font-size: 1.2rem;
            color: #ff9933;
            margin-bottom: 30px;
            line-height: 1.4;
            max-width: 90%;
        }
        .start-button {
            background: linear-gradient(45deg, #ff6600, #ff3300);
            color: #000;
            border: none;
            padding: 20px 40px;
            font-size: 1.5rem;
            border-radius: 50px;
            cursor: pointer;
            font-weight: bold;
            animation: pulse 1s infinite alternate;
            box-shadow: 0 0 30px #ff6600;
            touch-action: manipulation;
            max-width: 90%;
            width: auto;
        }
        .fireworks-title {
            text-align: center;
            color: #ff9900;
            font-size: 1.5rem;
            margin: 20px 0;
            animation: fireGlow 3s infinite;
            line-height: 1.3;
        }
        @keyframes fireGlow {
            0%, 100% { text-shadow: 0 0 10px #ff6600; }
            50% { text-shadow: 0 0 25px #ff9900, 0 0 40px #ff3300; }
        }
        .visually-hidden {
            position: absolute;
            width: 1px;
            height: 1px;
            padding: 0;
            margin: -1px;
            overflow: hidden;
            clip: rect(0, 0, 0, 0);
            white-space: nowrap;
            border: 0;
        }
        
        /* Responsive */
        @media (min-width: 481px) and (max-width: 768px) {
            h1 { font-size: 3rem; }
            .start-title { font-size: 3rem; }
            .wishes-grid { grid-template-columns: repeat(2, 1fr); }
        }
        
        @media (min-width: 769px) {
            h1 { font-size: 4rem; }
            .start-title { font-size: 4rem; }
            .wishes-grid { grid-template-columns: repeat(2, 1fr); }
            .share-container { grid-template-columns: repeat(2, 1fr); }
            .all-share-btn { grid-column: span 2; }
            #musicControl { width: 60px; height: 60px; font-size: 1.8rem; }
        }
        
        @media (min-width: 1025px) {
            h1 { font-size: 5rem; }
            .wishes-grid { grid-template-columns: repeat(4, 1fr); }
        }
        
        html {
            -webkit-text-size-adjust: 100%;
            text-size-adjust: 100%;
        }
        
        button, input[type="button"], input[type="submit"] {
            min-height: 44px;
            min-width: 44px;
        }
    </style>
</head>
<body itemscope itemtype="https://schema.org/WebPage">
    
    <!-- TOP BANNER AD - Adsterra -->
    <div class="ad-container">
        <script async="async" data-cfasync="false" src="//pl28368255.effectivegatecpm.com/e06d50dc541921df930debb186392bbd/invoke.js"></script>
        <div id="container-e06d50dc541921df930debb186392bbd"></div>
    </div>
    
    <!-- Start Screen -->
    <div id="startScreen" role="dialog" aria-modal="true" aria-labelledby="startScreenTitle">
        <h1 class="start-title" id="startScreenTitle">üéä WELCOME TO 2026 üéä</h1>
        <p class="start-subtitle">Click below to start celebration with music & fireworks!</p>
        <button class="start-button" id="startButton">üéµ START CELEBRATION 2026 üéâ</button>
    </div>

    <!-- Music Control -->
    <div id="musicControl" title="Click to play/pause music" role="button">üîá</div>

    <!-- Fireworks Canvas -->
    <canvas id="fireworks-canvas"></canvas>

    <!-- User Counter -->
    <div class="counter" id="userCounter">
        üéâ <span id="countNumber">1,283,450</span> Celebrating 2026
    </div>

    <!-- Main Container -->
    <main class="container" role="main">
        <!-- Header -->
        <header class="orange-border main-header" role="banner">
            <h1>üéä HAPPY 2026 üéä</h1>
            <div class="tagline">Create Your Viral New Year 2026 Greeting</div>
            <div class="fireworks-title">üéÜ FIREWORKS CELEBRATION 2026 üéÜ</div>
        </header>

        <!-- User Input Section -->
        <section class="orange-border">
            <h2 style="text-align: center; font-size: 1.8rem; margin-bottom: 20px; color: #ffcc00;">
                ‚ú® PERSONALIZE YOUR 2026 GREETING ‚ú®
            </h2>
            
            <input type="text" id="userName" placeholder="ENTER YOUR NAME (e.g., John)" maxlength="25" 
                   style="font-size: 1.3rem; text-align: center;">
            
            <input type="file" id="photoUpload" accept="image/*" style="display: none;">
            <button class="action-btn" onclick="document.getElementById('photoUpload').click()">
                üì∏ UPLOAD YOUR PHOTO
            </button>
            
            <img id="photo-preview" src="" alt="Photo preview" loading="lazy">
            
            <h3 style="text-align: center; font-size: 1.6rem; margin: 25px 0 15px 0; color: #ff9933;">
                üéØ SELECT YOUR 2026 WISH
            </h3>
            <div class="wishes-grid">
                <div class="wish-option" onclick="selectWish(this, 1)">
                    ü•≥ Wishing you a spectacular 2026 filled with joy, success and amazing adventures!
                </div>
                <div class="wish-option" onclick="selectWish(this, 2)">
                    ‚ú® May 2026 bring you endless happiness, good health and prosperity!
                </div>
                <div class="wish-option" onclick="selectWish(this, 3)">
                    üöÄ New Year 2026, New Beginnings! Let's make it the most incredible year ever!
                </div>
                <div class="wish-option" onclick="selectWish(this, 4)">
                    üåü May all your dreams and aspirations come true in this amazing year 2026!
                </div>
            </div>
            
            <textarea id="customWish" placeholder="‚úçÔ∏è OR WRITE YOUR OWN CUSTOM 2026 WISH HERE..." 
                     rows="4" style="margin-top: 25px; font-size: 1.1rem;"></textarea>
            
            <button class="action-btn" id="createBtn" onclick="createGreeting()" 
                   style="background: linear-gradient(45deg, #00ff88, #00ccff); color: #000; margin-top: 25px;">
                üé® CREATE MY 2026 GREETING
            </button>
            
            <!-- MIDDLE BANNER AD - Adsterra -->
            <div class="ad-container" style="margin-top: 30px;">
                <script type="text/javascript">
                    atOptions = {
                        'key' : '1d1b141d779b7f32f5f35246b9ab88e4',
                        'format' : 'iframe',
                        'height' : 90,
                        'width' : 728,
                        'params' : {}
                    };
                    document.write('<scr' + 'ipt type="text/javascript" src="//www.highperformanceformat.com/1d1b141d779b7f32f5f35246b9ab88e4/invoke.js"></scr' + 'ipt>');
                </script>
            </div>
        </section>

        <!-- Share Section -->
        <section class="orange-border share-container" id="shareSection">
            <h2 style="text-align: center; font-size: 1.8rem; color: #ffcc00; margin-bottom: 25px;">
                üì± SHARE YOUR 2026 WISH
            </h2>
            
            <button class="share-btn whatsapp-btn" onclick="shareToWhatsApp()">
                <span>üì±</span> WHATSAPP
            </button>
            
            <button class="share-btn facebook-btn" onclick="shareToFacebook()">
                <span>üëç</span> FACEBOOK
            </button>
            
            <button class="share-btn instagram-btn" onclick="shareToInstagram()">
                <span>üì∏</span> INSTAGRAM
            </button>
            
            <button class="share-btn all-share-btn" onclick="shareToAllPlatforms()">
                ‚ö° SHARE TO ALL PLATFORMS ‚ö°
            </button>
            
            <div class="instructions" id="shareInstructions">
                <h3>üìã How to Share Your 2026 Greeting:</h3>
                <ol>
                    <li>Click any share button above</li>
                    <li>For WhatsApp: Opens directly with your greeting ready to send</li>
                    <li>For Facebook/Instagram: Opens share dialog</li>
                    <li>Choose friends/family to share with</li>
                    <li>Spread the 2026 joy! üéâ</li>
                </ol>
                <p style="color: #ffcc00; margin-top: 15px; font-weight: bold;">
                    üî• Pro Tip: Use "SHARE TO ALL" for maximum viral reach!
                </p>
            </div>
        </section>

        <!-- Footer -->
        <footer style="text-align: center; padding: 25px; color: #ff9966; font-size: 1rem;" role="contentinfo">
            <p>üéÜ Made with ‚ù§Ô∏è for 2026 Celebrations | Share and Spread the Joy! üéÜ</p>
            <p style="margin-top: 15px; font-size: 1.1rem; color: #ffcc00;">
                #HappyNewYear2026 #2026Viral #ShareTheJoy #NewYearWishes2026
            </p>
        </footer>
    </main>

    <!-- BACKGROUND MUSIC FOR 2026 CELEBRATION -->
    <audio id="backgroundMusic" loop preload="auto">
        <!-- Multiple celebration music sources for 2026 -->
        <source src="https://cdn.pixabay.com/download/audio/2022/03/15/audio_d1718ab41b.mp3" type="audio/mpeg">
        <source src="https://assets.mixkit.co/active_storage/sfx/2000/2000-preview.mp3" type="audio/mpeg">
        <source src="https://cdn.pixabay.com/download/audio/2021/08/04/audio_12b0c7443c.mp3" type="audio/mpeg">
    </audio>

    <script>
        // Global Variables
        const musicElement = document.getElementById('backgroundMusic');
        const musicControl = document.getElementById('musicControl');
        const startScreen = document.getElementById('startScreen');
        const startButton = document.getElementById('startButton');
        const userCounter = document.querySelector('.counter');

        let isMusicPlaying = false;
        let musicInitialized = false;
        let userName = "";
        let userPhoto = null;
        let selectedWish = "ü•≥ Wishing you a spectacular 2026 filled with joy, success and amazing adventures!";
        let finalImageData = null;
        let visitorCount = 1283450;

        // Configure music
        musicElement.volume = 0.6;
        musicElement.loop = true;

        // Initialize music system
        function initializeMusic() {
            if (musicInitialized) return;
            musicElement.load();
            musicInitialized = true;
            console.log('üéµ 2026 Music system ready');
            musicControl.textContent = 'üîá';
            musicControl.title = 'Click to play 2026 celebration music';
        }

        // Play music
        function playMusic() {
            const playPromise = musicElement.play();
            
            if (playPromise !== undefined) {
                playPromise
                    .then(() => {
                        isMusicPlaying = true;
                        musicControl.textContent = 'üîä';
                        musicControl.classList.add('playing');
                        musicControl.title = '2026 Music playing - Click to pause';
                        console.log('‚úÖ 2026 Celebration music started!');
                    })
                    .catch(error => {
                        console.log('Music autoplay blocked:', error);
                        musicControl.textContent = '‚ñ∂Ô∏è';
                        musicControl.title = 'Click to play 2026 music';
                        
                        // Show friendly prompt
                        setTimeout(() => {
                            if (!isMusicPlaying && window.innerWidth <= 768) {
                                alert('üéµ Tap the music button (top-left) to start 2026 celebration music!');
                            }
                        }, 1000);
                    });
            }
        }

        // Pause music
        function pauseMusic() {
            musicElement.pause();
            isMusicPlaying = false;
            musicControl.textContent = 'üîá';
            musicControl.classList.remove('playing');
            musicControl.title = 'Click to play 2026 music';
        }

        // Toggle music
        function toggleMusic() {
            if (!musicInitialized) {
                initializeMusic();
            }
            
            if (isMusicPlaying) {
                pauseMusic();
            } else {
                playMusic();
            }
        }

        // Start celebration
        function startCelebration() {
            startScreen.style.display = 'none';
            musicControl.style.display = 'flex';
            userCounter.style.display = 'block';
            
            initializeMusic();
            
            // Auto-play music on start
            setTimeout(() => {
                playMusic();
            }, 300);
            
            initFireworks();
            updateCounter();
            
            console.log('üéâ 2026 Celebration started!');
        }

        // Fireworks Animation
        function initFireworks() {
            const canvas = document.getElementById('fireworks-canvas');
            const ctx = canvas.getContext('2d');
            
            const dpr = window.devicePixelRatio || 1;
            canvas.width = window.innerWidth * dpr;
            canvas.height = window.innerHeight * dpr;
            ctx.scale(dpr, dpr);

            const fireworks = [];
            let animationId;

            class Particle {
                constructor(x, y, color) {
                    this.x = x;
                    this.y = y;
                    this.color = color;
                    this.speedX = Math.random() * 4 - 2;
                    this.speedY = Math.random() * 4 - 2;
                    this.size = Math.random() * 3 + 1;
                    this.alpha = 1;
                    this.decay = Math.random() * 0.02 + 0.005;
                }

                update() {
                    this.speedY += 0.05;
                    this.x += this.speedX;
                    this.y += this.speedY;
                    this.alpha -= this.decay;
                    return this.alpha > 0;
                }

                draw() {
                    ctx.save();
                    ctx.globalAlpha = this.alpha;
                    ctx.fillStyle = this.color;
                    ctx.beginPath();
                    ctx.arc(this.x, this.y, this.size, 0, Math.PI * 2);
                    ctx.fill();
                    ctx.restore();
                }
            }

            class Firework {
                constructor() {
                    this.x = Math.random() * canvas.width;
                    this.y = canvas.height;
                    this.targetY = Math.random() * (canvas.height / 2);
                    this.speed = 2 + Math.random() * 2;
                    this.color = `hsl(${Math.random() * 60}, 100%, 50%)`;
                    this.particles = [];
                    this.exploded = false;
                }

                update() {
                    if (!this.exploded) {
                        this.y -= this.speed;
                        
                        ctx.beginPath();
                        ctx.moveTo(this.x, this.y + 8);
                        ctx.lineTo(this.x, this.y);
                        ctx.strokeStyle = this.color;
                        ctx.lineWidth = 2;
                        ctx.stroke();

                        if (this.y <= this.targetY) {
                            this.explode();
                            this.exploded = true;
                        }
                        
                        ctx.fillStyle = this.color;
                        ctx.beginPath();
                        ctx.arc(this.x, this.y, 3, 0, Math.PI * 2);
                        ctx.fill();
                    }

                    for (let i = this.particles.length - 1; i >= 0; i--) {
                        if (!this.particles[i].update()) {
                            this.particles.splice(i, 1);
                        }
                    }

                    return this.exploded && this.particles.length === 0;
                }

                explode() {
                    const particleCount = window.innerWidth <= 768 ? 50 : 100;
                    for (let i = 0; i < particleCount; i++) {
                        this.particles.push(new Particle(this.x, this.y, this.color));
                    }
                }

                draw() {
                    this.particles.forEach(particle => particle.draw());
                }
            }

            function animate() {
                ctx.fillStyle = 'rgba(0, 0, 0, 0.1)';
                ctx.fillRect(0, 0, canvas.width, canvas.height);

                const spawnRate = window.innerWidth <= 768 ? 0.05 : 0.08;
                if (Math.random() < spawnRate) {
                    fireworks.push(new Firework());
                }

                for (let i = fireworks.length - 1; i >= 0; i--) {
                    const firework = fireworks[i];
                    if (firework.update()) {
                        fireworks.splice(i, 1);
                    } else {
                        firework.draw();
                    }
                }

                animationId = requestAnimationFrame(animate);
            }

            function handleResize() {
                canvas.width = window.innerWidth * dpr;
                canvas.height = window.innerHeight * dpr;
                ctx.scale(dpr, dpr);
            }

            window.addEventListener('resize', handleResize);
            animate();
        }

        // Update counter
        function updateCounter() {
            setInterval(() => {
                visitorCount += Math.floor(Math.random() * 100) + 50;
                document.getElementById('countNumber').textContent = visitorCount.toLocaleString();
            }, 5000);
        }

        // Photo upload
        document.getElementById('photoUpload').addEventListener('change', function(e) {
            const file = e.target.files[0];
            if (file) {
                const reader = new FileReader();
                reader.onload = function(event) {
                    userPhoto = new Image();
                    userPhoto.onload = function() {
                        document.getElementById('photo-preview').src = event.target.result;
                        document.getElementById('photo-preview').style.display = 'block';
                    };
                    userPhoto.src = event.target.result;
                };
                reader.readAsDataURL(file);
            }
        });

        // Name input
        document.getElementById('userName').addEventListener('input', function(e) {
            userName = e.target.value.trim();
        });

        // Wish selection
        function selectWish(element, wishNum) {
            document.querySelectorAll('.wish-option').forEach(opt => {
                opt.classList.remove('selected');
            });
            
            element.classList.add('selected');
            
            const wishes = [
                "ü•≥ Wishing you a spectacular 2026 filled with joy, success and amazing adventures!",
                "‚ú® May 2026 bring you endless happiness, good health and prosperity!",
                "üöÄ New Year 2026, New Beginnings! Let's make it the most incredible year ever!",
                "üåü May all your dreams and aspirations come true in this amazing year 2026!"
            ];
            
            selectedWish = wishes[wishNum - 1];
            document.getElementById('customWish').value = selectedWish;
        }

        // Custom wish
        document.getElementById('customWish').addEventListener('input', function(e) {
            selectedWish = e.target.value || "Happy New Year 2026! üéâ";
            document.querySelectorAll('.wish-option').forEach(opt => {
                opt.classList.remove('selected');
            });
        });

        // Create greeting
        function createGreeting() {
            if (!userName) {
                alert("üìõ Please enter your name first!");
                document.getElementById('userName').focus();
                return;
            }
            
            document.getElementById('shareSection').style.display = 'grid';
            document.getElementById('shareInstructions').style.display = 'block';
            generateFinalImage();
            
            setTimeout(() => {
                document.getElementById('shareSection').scrollIntoView({ 
                    behavior: 'smooth', 
                    block: 'start' 
                });
            }, 100);
            
            alert(`‚úÖ 2026 Greeting created for ${userName}!\n\nShare it with the world! üéâ`);
        }

        // Generate image
        function generateFinalImage() {
            const canvas = document.createElement('canvas');
            const isMobile = window.innerWidth <= 768;
            canvas.width = isMobile ? 800 : 1200;
            canvas.height = isMobile ? 800 : 1200;
            const ctx = canvas.getContext('2d');

            ctx.fillStyle = '#000000';
            ctx.fillRect(0, 0, canvas.width, canvas.height);
            
            ctx.strokeStyle = '#ff6600';
            ctx.lineWidth = isMobile ? 15 : 20;
            ctx.strokeRect(10, 10, canvas.width - 20, canvas.height - 20);

            const starCount = isMobile ? 100 : 200;
            for(let i = 0; i < starCount; i++) {
                const x = Math.random() * canvas.width;
                const y = Math.random() * canvas.height * 0.8;
                const radius = Math.random() * 4 + 1;
                const alpha = Math.random() * 0.7 + 0.3;
                
                ctx.beginPath();
                ctx.arc(x, y, radius, 0, Math.PI * 2);
                ctx.fillStyle = `hsla(${Math.random() * 60}, 100%, 60%, ${alpha})`;
                ctx.fill();
            }

            if (userPhoto) {
                const centerX = canvas.width / 2;
                const photoSize = isMobile ? 100 : 120;
                const photoY = isMobile ? 250 : 350;
                
                ctx.save();
                ctx.beginPath();
                ctx.arc(centerX, photoY, photoSize, 0, Math.PI * 2);
                ctx.closePath();
                ctx.clip();
                ctx.drawImage(userPhoto, centerX - photoSize, photoY - photoSize, photoSize * 2, photoSize * 2);
                ctx.restore();
                
                ctx.beginPath();
                ctx.arc(centerX, photoY, photoSize + 5, 0, Math.PI * 2);
                ctx.strokeStyle = '#ff6600';
                ctx.lineWidth = 6;
                ctx.stroke();
            }

            const centerX = canvas.width / 2;
            
            ctx.fillStyle = '#ff6600';
            ctx.font = isMobile ? 'bold 60px Arial Black' : 'bold 100px Arial Black';
            ctx.textAlign = 'center';
            ctx.shadowColor = '#ff3300';
            ctx.shadowBlur = 15;
            ctx.fillText('HAPPY NEW YEAR', centerX, isMobile ? 450 : 550);
            
            ctx.font = isMobile ? 'bold 100px Arial Black' : 'bold 150px Arial Black';
            ctx.fillText('2026', centerX, isMobile ? 550 : 700);
            
            ctx.shadowBlur = 0;
            
            ctx.font = isMobile ? 'bold 40px Arial' : 'bold 60px Arial';
            ctx.fillStyle = '#ff9933';
            ctx.fillText(`From: ${userName}`, centerX, isMobile ? 650 : 800);

            ctx.font = isMobile ? 'bold 25px Arial' : 'bold 35px Arial';
            ctx.fillStyle = '#ffcc66';
            
            const maxWidth = isMobile ? 700 : 1000;
            const lineHeight = isMobile ? 30 : 45;
            const words = selectedWish.split(' ');
            let line = '';
            let y = isMobile ? 720 : 880;

            for(let i = 0; i < words.length; i++) {
                const testLine = line + words[i] + ' ';
                const metrics = ctx.measureText(testLine);
                
                if (metrics.width > maxWidth && i > 0) {
                    ctx.fillText(line, centerX, y);
                    line = words[i] + ' ';
                    y += lineHeight;
                } else {
                    line = testLine;
                }
            }
            ctx.fillText(line, centerX, y);

            ctx.font = isMobile ? '18px Arial' : '25px Arial';
            ctx.fillStyle = 'rgba(255, 153, 51, 0.7)';
            ctx.fillText('Created with Happy 2026 Generator', centerX, canvas.height - 50);

            finalImageData = canvas.toDataURL('image/jpeg', 0.9);
        }

        // Share functions
        function shareToWhatsApp() {
            let message = `üéâ *HAPPY NEW YEAR 2026!* üéâ\n\n`;
            
            if (userName) {
                message += `From: ${userName}\n\n`;
            }
            
            message += `${selectedWish}\n\n‚ú® Create your own 2026 greeting: ${window.location.href}\n\n#HappyNewYear2026 #2026Wishes`;
            
            const encodedMessage = encodeURIComponent(message);
            const isMobile = /iPhone|iPad|iPod|Android/i.test(navigator.userAgent);
            
            if (isMobile) {
                window.location.href = `whatsapp://send?text=${encodedMessage}`;
                setTimeout(() => {
                    window.open(`https://wa.me/?text=${encodedMessage}`, '_blank');
                }, 10);
            } else {
                window.open(`https://web.whatsapp.com/send?text=${encodedMessage}`, '_blank');
            }
            
            showShareFeedback('WhatsApp');
        }

        function shareToFacebook() {
            const url = encodeURIComponent(window.location.href);
            const quote = encodeURIComponent(`${selectedWish} - Happy New Year 2026!${userName ? ' From ' + userName : ''}`);
            
            window.open(
                `https://www.facebook.com/sharer/sharer.php?u=${url}&quote=${quote}`,
                'facebook-share',
                'width=600,height=400'
            );
            
            showShareFeedback('Facebook');
        }

        function shareToInstagram() {
            if (!finalImageData) {
                alert("Please create your greeting first!");
                return;
            }

            const link = document.createElement('a');
            link.href = finalImageData;
            link.download = `Happy2026_${userName || 'User'}_Instagram.jpg`;
            document.body.appendChild(link);
            link.click();
            document.body.removeChild(link);
            
            showShareFeedback('Instagram');
            alert("‚úÖ Image downloaded! Share it on Instagram from your gallery.");
        }

        function shareToAllPlatforms() {
            if (finalImageData) {
                const link = document.createElement('a');
                link.href = finalImageData;
                link.download = `Happy2026_${userName || 'User'}_Greeting.jpg`;
                document.body.appendChild(link);
                link.click();
                document.body.removeChild(link);
            }

            shareToWhatsApp();
            setTimeout(() => shareToFacebook(), 50);
            
            showShareFeedback('All Platforms');
        }

        function showShareFeedback(platform) {
            let feedbackEl = document.getElementById('shareFeedback');
            if (!feedbackEl) {
                feedbackEl = document.createElement('div');
                feedbackEl.id = 'shareFeedback';
                feedbackEl.style.cssText = `
                    position: fixed;
                    top: 50%;
                    left: 50%;
                    transform: translate(-50%, -50%);
                    background: rgba(255, 102, 0, 0.95);
                    color: #000;
                    padding: 20px 40px;
                    border-radius: 15px;
                    font-size: 1.5rem;
                    font-weight: bold;
                    z-index: 1000;
                    box-shadow: 0 0 30px rgba(255, 102, 0, 0.8);
                    text-align: center;
                    border: 3px solid #ffcc00;
                `;
                document.body.appendChild(feedbackEl);
            }
            
            feedbackEl.innerHTML = `‚úÖ Sharing 2026 Greeting to ${platform}...`;
            feedbackEl.style.display = 'block';
            
            setTimeout(() => {
                feedbackEl.style.display = 'none';
            }, 1500);
        }

        // Event listeners
        startButton.addEventListener('click', startCelebration);
        musicControl.addEventListener('click', toggleMusic);
        
        musicControl.addEventListener('touchstart', function(e) {
            e.preventDefault();
            toggleMusic();
        }, { passive: false });

        // Initialize on load
        window.addEventListener('DOMContentLoaded', function() {
            console.log('üéâ Happy 2026 Celebration Page Loaded!');
            
            document.addEventListener('click', function initOnFirstClick() {
                initializeMusic();
                document.removeEventListener('click', initOnFirstClick);
            }, { once: true });
            
            document.addEventListener('touchstart', function initOnFirstTouch() {
                initializeMusic();
                document.removeEventListener('touchstart', initOnFirstTouch);
            }, { once: true, passive: true });
        });

        // Handle page visibility
        document.addEventListener('visibilitychange', function() {
            if (document.hidden && isMusicPlaying) {
                musicElement.pause();
            } else if (!document.hidden && isMusicPlaying) {
                musicElement.play().catch(() => {
                    isMusicPlaying = false;
                    musicControl.textContent = 'üîá';
                    musicControl.classList.remove('playing');
                });
            }
        });
    </script>
</body>
</html>
